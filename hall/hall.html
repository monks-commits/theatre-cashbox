<!-- theatre-cashbox/hall/hall.html -->
<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Схема залу (каса)</title>

<style>
/* ====== BASE ====== */
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#f3f4f6;color:#111}
h1{margin:16px 24px}
button{cursor:pointer}

/* ====== LAYOUT ====== */
.wrap{display:flex;gap:24px;align-items:flex-start;padding:0 24px 24px}
.left{flex:1;min-width:0}
.right{width:280px;flex:0 0 280px}

.scroll{background:#e5e7eb;border-radius:16px;padding:12px;overflow-x:auto}
.inner{min-width:980px}

/* ====== SECTIONS ====== */
.section{margin-bottom:18px}
.section-title{text-align:center;font-size:14px;letter-spacing:.08em;color:#6b7280;margin:6px 0;text-transform:uppercase}

/* ====== ROWS / SEATS ====== */
.row{display:flex;align-items:center;gap:8px;margin-bottom:4px}
.row-label{width:24px;text-align:right;font-size:11px;color:#6b7280}
.seats{display:flex;gap:4px}
.seat{
  width:24px;height:24px;border-radius:6px;
  border:1px solid #d1d5db;background:#fff;
  font-size:11px;display:flex;align-items:center;justify-content:center
}
.seat.front{background:#fef9c3}
.seat.mid{background:#dbeafe}
.seat.back{background:#e5e7eb}
.seat.amphi{background:#e0f2fe}
.seat.balcony{background:#f3e8ff}
.seat.lodge{background:#fee2e2}

.seat.selected{background:#2563eb;color:#fff;border-color:#2563eb}
.seat.taken{background:#9ca3af;color:#fff;pointer-events:none}

.gapR{margin-right:16px}
.amphi-gap{width:24px}

/* ====== PARTER + LODGES ====== */
.parter-wrap{display:flex;justify-content:center;gap:24px}
.lodge{display:flex;flex-direction:column;align-items:center;gap:4px}
.lodge-title{font-size:11px;color:#6b7280}
.lodge-seats{display:flex;flex-direction:column;gap:4px}

/* ====== SUMMARY ====== */
.card{background:#fff;border-radius:16px;padding:16px}
.card h2{margin:0 0 8px}
.meta{font-size:14px;color:#4b5563;margin:4px 0}
.primary{
  width:100%;padding:10px 14px;border-radius:999px;
  border:0;background:#2563eb;color:#fff;font-weight:700
}
.primary:disabled{background:#9ca3af}

/* ====== MOBILE ====== */
@media(max-width:900px){
  .wrap{flex-direction:column}
  .right{width:auto}
}
</style>
</head>

<body>
<h1>Схема залу (каса)</h1>

<div class="wrap">
  <div class="left">
    <div class="scroll">
      <div class="inner">

        <section class="section">
          <div class="section-title">Партер</div>

          <div class="parter-wrap">
            <div class="lodge">
              <div class="lodge-title">Ложа А</div>
              <div class="lodge-seats" id="lodgeA"></div>
            </div>

            <div id="parter"></div>

            <div class="lodge">
              <div class="lodge-title">Ложа Б</div>
              <div class="lodge-seats" id="lodgeB"></div>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="section-title">Амфітеатр</div>
          <div id="amphi"></div>
        </section>

        <section class="section">
          <div class="section-title">Балкон</div>
          <div id="balcony"></div>
        </section>

      </div>
    </div>
  </div>

  <div class="right">
    <div class="card">
      <h2>Обрані місця</h2>
      <div class="meta" id="places">—</div>
      <div class="meta" id="sum">Сума: 0 грн</div>
      <button class="primary" id="toSale" disabled>Перейти до продажу</button>
    </div>
  </div>
</div>

<script>
/* ====== STATE ====== */
const selected = new Map();
const PRICES = {
  parter1:200, parter2:160, parter3:140,
  amphi:120, balcony1:100, balcony2:80,
  lodge:10
};

/* ====== HELPERS ====== */
function seat(label, price, cls){
  const b=document.createElement("button");
  b.className="seat "+cls;
  b.textContent=label;
  b.onclick=()=>toggle(b,label,price);
  return b;
}
function toggle(btn,label,price){
  if(btn.classList.contains("selected")){
    btn.classList.remove("selected");
    selected.delete(label);
  }else{
    btn.classList.add("selected");
    selected.set(label,price);
  }
  renderSummary();
}
function renderSummary(){
  if(!selected.size){
    places.textContent="—";
    sum.textContent="Сума: 0 грн";
    toSale.disabled=true;
    return;
  }
  places.textContent=[...selected.keys()].join("; ");
  sum.textContent="Сума: "+[...selected.values()].reduce((a,b)=>a+b,0)+" грн";
  toSale.disabled=false;
}

/* ====== PARTER ====== */
const parter=document.getElementById("parter");
for(let r=1;r<=18;r++){
  const row=document.createElement("div");row.className="row";
  const lab=document.createElement("div");lab.className="row-label";lab.textContent=r;
  const seats=document.createElement("div");seats.className="seats";
  let price=r<=6?PRICES.parter1:r<=12?PRICES.parter2:PRICES.parter3;
  let cls=r<=6?"front":r<=12?"mid":"back";
  for(let s=1;s<=20;s++){
    const c=cls+(s===10?" gapR":"");
    seats.appendChild(seat(s,price,c));
  }
  row.append(lab,seats);parter.appendChild(row);
}

/* ====== LODGES ====== */
["A","B"].forEach(id=>{
  const box=document.getElementById("lodge"+id);
  for(let i=1;i<=18;i++){
    box.appendChild(seat(i,PRICES.lodge,"lodge"));
  }
});

/* ====== AMPHI ====== */
const amphi=document.getElementById("amphi");
[19,20,21,22,23].forEach(r=>{
  const row=document.createElement("div");row.className="row";
  const lab=document.createElement("div");lab.className="row-label";lab.textContent=r;
  const L=document.createElement("div");L.className="seats";
  const gap=document.createElement("div");gap.className="amphi-gap";
  const R=document.createElement("div");R.className="seats";
  for(let s=1;s<=11;s++)L.appendChild(seat(s,PRICES.amphi,"amphi"));
  for(let s=12;s<=22;s++)R.appendChild(seat(s,PRICES.amphi,"amphi"));
  row.append(lab,L,gap,R);amphi.appendChild(row);
});

/* ====== BALCONY ====== */
const balcony=document.getElementById("balcony");
for(let r=1;r<=5;r++){
  const row=document.createElement("div");row.className="row";
  const lab=document.createElement("div");lab.className="row-label";lab.textContent=r;
  const seats=document.createElement("div");seats.className="seats";
  for(let s=1;s<=28;s++){
    seats.appendChild(seat(s,PRICES.balcony1,"balcony"+(s===14?" gapR":"")));
  }
  row.append(lab,seats);balcony.appendChild(row);
}
const r6=document.createElement("div");r6.className="row";
const l6=document.createElement("div");l6.className="row-label";l6.textContent=6;
const s6=document.createElement("div");s6.className="seats";
for(let s=1;s<=10;s++)s6.appendChild(seat(s,PRICES.balcony2,"balcony"+(s===10?" gapR":"")));
for(let s=11;s<=20;s++)s6.appendChild(seat(s,PRICES.balcony2,"balcony"));
r6.append(l6,s6);balcony.appendChild(r6);

/* ====== SALE ====== */
toSale.onclick=()=>{
  const data={seats:[...selected.keys()],sum:[...selected.values()].reduce((a,b)=>a+b,0)};
  localStorage.setItem("CASH_SALE",JSON.stringify(data));
  alert("Продаж зафіксовано локально");
};
</script>
</body>
</html>
